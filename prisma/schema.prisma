generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = env("DATABASE_PROVIDER")
  url      = env("DATABASE_URL")
}

enum Channel {
  feed
  stories
  ads
  other
}

enum Format {
  reels
  carrossel
  estatico
  story
  outro
}

enum CardStatus {
  planejado
  aprovado
  postado
}

enum GeneratedType {
  caption
  reels_script
  planning
}

model User {
  id           String   @id @default(cuid())
  name         String?
  email        String   @unique
  passwordHash String
  clients      Client[]
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Client {
  id              String   @id @default(cuid())
  ownerId         String
  owner           User     @relation(fields: [ownerId], references: [id])
  name            String
  niche           String
  country         String
  instagramHandle String?
  notes           String?
  board           Board?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Board {
  id        String @id @default(cuid())
  clientId  String @unique
  client    Client @relation(fields: [clientId], references: [id])
  name      String
  lists     List[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model List {
  id        String  @id @default(cuid())
  boardId   String
  board     Board   @relation(fields: [boardId], references: [id])
  title     String
  order     Int
  cards     Card[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Card {
  id          String            @id @default(cuid())
  listId      String
  list        List              @relation(fields: [listId], references: [id])
  title       String
  description String?
  date        DateTime?
  channel     Channel           @default(feed)
  format      Format            @default(reels)
  goal        String?
  status      CardStatus        @default(planejado)
  generated   GeneratedContent[]
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
}

model GeneratedContent {
  id        String        @id @default(cuid())
  cardId    String
  card      Card          @relation(fields: [cardId], references: [id])
  type      GeneratedType
  content   String
  createdAt DateTime      @default(now())
}
